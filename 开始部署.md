# 🚀 GitHub + Vercel 完整部署指南

按照下面的步骤，30分钟完成！

---

## 第一步：配置 Supabase（10分钟）

### 1.1 注册并创建项目

1. 访问 https://supabase.com
2. 点击 **"Start your project"**
3. 用 GitHub 账号登录
4. 点击 **"New Project"**
5. 填写信息：
   - Organization: 选择你的账号
   - Name: `love-website`
   - Database Password: 设置一个强密码（**记住它！**）
   - Region: 选择 **Northeast Asia (Seoul)** 或 **Southeast Asia (Singapore)**
6. 点击 **"Create new project"**
7. 等待 2-3 分钟（会显示进度）

### 1.2 获取 API 密钥

项目创建完成后：
1. 左侧菜单点击 ⚙️ **"Settings"**
2. 点击 **"API"**
3. 找到并复制以下两个值：

**Project URL**（类似）：
```
https://xxxxxxxxxxxxx.supabase.co
```

**anon public**（类似）：
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...很长的字符串
```

### 1.3 更新本地环境变量

打开项目的 `.env.local` 文件，修改为：

```env
# Love Website Configuration
NEXT_PUBLIC_START_DATE=2022-07-15
NEXT_PUBLIC_PARTNER1_NAME=Mao
NEXT_PUBLIC_PARTNER2_NAME=Pi

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=粘贴你的Project_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=粘贴你的anon_public密钥
```

保存文件！

### 1.4 创建数据库表

1. 回到 Supabase 控制台
2. 左侧点击 **"SQL Editor"**
3. 点击 **"New Query"**
4. 复制粘贴以下 SQL：

```sql
-- 创建留言表
CREATE TABLE messages (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  content TEXT NOT NULL,
  author TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 创建生活记录表
CREATE TABLE moments (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  date DATE NOT NULL,
  author TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 创建待办清单表
CREATE TABLE todos (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  title TEXT NOT NULL,
  completed BOOLEAN DEFAULT FALSE,
  priority TEXT DEFAULT 'medium',
  created_by TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 启用行级安全
ALTER TABLE messages ENABLE ROW LEVEL SECURITY;
ALTER TABLE moments ENABLE ROW LEVEL SECURITY;
ALTER TABLE todos ENABLE ROW LEVEL SECURITY;

-- 创建访问策略（只允许登录用户）
CREATE POLICY "Authenticated users can do everything on messages"
  ON messages FOR ALL TO authenticated USING (true) WITH CHECK (true);

CREATE POLICY "Authenticated users can do everything on moments"
  ON moments FOR ALL TO authenticated USING (true) WITH CHECK (true);

CREATE POLICY "Authenticated users can do everything on todos"
  ON todos FOR ALL TO authenticated USING (true) WITH CHECK (true);
```

5. 点击 **"Run"** 按钮（或按 Cmd/Ctrl + Enter）
6. 看到 **"Success. No rows returned"** 就成功了！

### 1.5 创建用户账号

1. 左侧点击 🔐 **"Authentication"**
2. 点击 **"Users"** 标签
3. 点击 **"Add user"** → **"Create new user"**

**创建第一个账号（Mao）**：
- Email: `你的邮箱@gmail.com`
- Password: `设置一个强密码`
- ✅ 勾选 **"Auto Confirm User"**
- 点击 **"Create user"**

**创建第二个账号（Pi）**：
- Email: `女朋友的邮箱@gmail.com`
- Password: `设置一个强密码`
- ✅ 勾选 **"Auto Confirm User"**
- 点击 **"Create user"**

⚠️ **重要**：记住这两个邮箱和密码！

---

## 第二步：推送到 GitHub（5分钟）

### 2.1 初始化 Git 仓库

在项目文件夹打开终端，执行：

```bash
git init
git add .
git commit -m "Initial commit: Love Website with login"
```

### 2.2 创建 GitHub 仓库

1. 访问 https://github.com/new
2. 填写信息：
   - Repository name: `love-website`
   - Description: `私密情侣网站`
   - ⚠️ 选择 **Private**（私密仓库）
   - ❌ 不要勾选 "Add a README file"
3. 点击 **"Create repository"**

### 2.3 推送代码

GitHub 会显示一些命令，复制运行，或者直接运行：

```bash
git remote add origin https://github.com/你的用户名/love-website.git
git branch -M main
git push -u origin main
```

输入 GitHub 用户名和密码（或使用 Personal Access Token）

看到类似这样的输出就成功了：
```
Enumerating objects: 100, done.
Counting objects: 100% (100/100), done.
...
To https://github.com/你的用户名/love-website.git
 * [new branch]      main -> main
```

---

## 第三步：部署到 Vercel（10分钟）

### 3.1 注册 Vercel

1. 访问 https://vercel.com
2. 点击 **"Sign Up"**
3. 选择 **"Continue with GitHub"**
4. 授权 Vercel 访问你的 GitHub

### 3.2 导入项目

1. 在 Vercel 首页点击 **"Add New..."** → **"Project"**
2. 找到 `love-website` 仓库
3. 点击 **"Import"**

### 3.3 配置项目

在配置页面：

1. **Project Name**: 可以改成 `mao-pi-love`（会成为网址的一部分）

2. **Framework Preset**: 自动识别为 **Next.js** ✅

3. **Root Directory**: 保持默认 `./`

4. **展开 "Environment Variables"**（环境变量）

   点击展开，添加以下 5 个变量：

   | Name | Value |
   |------|-------|
   | `NEXT_PUBLIC_SUPABASE_URL` | 你的 Supabase URL |
   | `NEXT_PUBLIC_SUPABASE_ANON_KEY` | 你的 Supabase 密钥 |
   | `NEXT_PUBLIC_START_DATE` | `2022-07-15` |
   | `NEXT_PUBLIC_PARTNER1_NAME` | `Mao` |
   | `NEXT_PUBLIC_PARTNER2_NAME` | `Pi` |

   每个变量：
   - 在 Name 输入框输入变量名
   - 在 Value 输入框输入对应的值
   - 点击 **"Add"**

5. 点击 **"Deploy"**

### 3.4 等待部署

- 会显示部署进度（2-3 分钟）
- 看到 **"Congratulations!"** 和烟花动画就成功了！🎉

### 3.5 获取网址

部署完成后：
- Vercel 会显示你的网站地址（类似 `mao-pi-love.vercel.app`）
- 点击 **"Visit"** 或复制网址

---

## 第四步：测试网站（5分钟）

### 4.1 访问网站

在浏览器打开你的 Vercel 网址

### 4.2 测试登录

1. 应该会自动跳转到登录页
2. 输入你在 Supabase 创建的邮箱和密码
3. 点击"登录"
4. 成功后会跳转到首页！

### 4.3 测试功能

- 查看首页的头像和倒计时
- 点击各个功能卡片
- 尝试发送留言
- 测试退出登录（右上角）

---

## 🎉 完成！

现在你有：
- ✅ 一个完全私密的情侣网站
- ✅ 只有你们两个能登录
- ✅ 可以在任何地方访问（手机、电脑）
- ✅ 数据保存在云端
- ✅ 完全免费！

## 📱 使用建议

### 手机访问
1. 打开网站登录
2. 浏览器菜单 → "添加到主屏幕"
3. 就像 APP 一样使用！

### 分享给女朋友
1. 把网址发给她
2. 把她的邮箱和密码告诉她
3. 她登录后就能一起使用了！

### 更新网站
如果你修改了代码：
```bash
git add .
git commit -m "更新说明"
git push
```
Vercel 会自动重新部署！

---

## 🆘 遇到问题？

### 登录失败
- 检查 Supabase 中是否创建了用户
- 检查邮箱和密码是否正确
- 检查 Vercel 环境变量是否配置正确

### 页面报错
- 检查 Vercel 部署日志
- 检查浏览器控制台错误
- 确认所有环境变量都已添加

### 需要帮助
随时问我！我会帮你解决 😊

---

## 📊 成本说明

- Supabase 免费版：500MB 数据库 + 1GB 文件存储
- Vercel 免费版：100GB 流量/月
- GitHub 私密仓库：免费

**总费用：0 元**

足够你们两个人使用很多年了！💕

---

准备好了吗？从第一步开始吧！🚀
